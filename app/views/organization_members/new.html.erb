<a href="<%= organization_members_path %>">Back</a>

<h1>Add member</h1>
<%= render "error_organization_member" %>

<%= form_with(url: new_organization_member_path, method: "get", remote: true) do |f| %>
  Method: <%= f.select :type, options_for_select(["Username", "Telephone", "Email"], :selected => session[:organization_member_type]), {},
    :onchange => "this.form.submit();" %>
<% end %>
<br>
<%= form_with(url: organization_members_path, method: "post", local: true, class: "form-2") do |f| %>
  <%= f.hidden_field :type, value: session[:organization_member_type] %>

  <% if session[:organization_member_type] == "Telephone" %>
    <%= f.label :telephone, "Telephone:" %>
    <%= f.text_field :telephone %>
  <% elsif session[:organization_member_type] == "Email" %>
    <%= f.label :email, "Email:" %>
    <%= f.text_field :email %>
  <% else %>
    <%= f.label :username, "Username:" %>
    <%= f.text_field :username %>
  <% end %>

  <%= f.label :can_edit, "Edit permissions:" %>
  <%= f.select :can_edit, options_for_select([true, false], :selected => false) %>

  <br>
  <%= f.submit "Add member" %>
<% end %>
